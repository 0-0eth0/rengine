{% extends 'base/base.html' %}
{% load static %}

{% block title %}
Import target for Recon
{% endblock title %}


{% block custom_js_css_link %}
<link href="{% static 'assets/css/components/tabs/custom-tabs.css' %}" rel="stylesheet" type="text/css" />
{% endblock custom_js_css_link %}

{% block breadcrumb_title %}
Import Targets
{% endblock breadcrumb_title %}

{% block main_content %}
<div class="statbox widget box box-shadow">
  <div class="widget-header">
    <div class="row">
      <div class="col-xl-12 col-md-12 col-sm-12 col-12">
        <h4>Import Targets</h4>
      </div>
    </div>
  </div>
  <div class="widget-content widget-content-area animated-underline-content">
    <ul class="nav nav-tabs mb-3" id="animateLine" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" id="animated-underline-txt-tab" data-toggle="tab" href="#animated-underline-text" role="tab" aria-controls="animated-underline-text" aria-selected="true"> Import from Text File</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="animated-underline-csv-tab" data-toggle="tab" href="#animated-underline-csv" role="tab" aria-controls="animated-underline-csv" aria-selected="false"> Import from CSV</a>
      </li>
    </ul>

    <div class="tab-content" id="animateLineContent-4">
      <div class="tab-pane fade show active" id="animated-underline-text" role="tabpanel" aria-labelledby="animated-underline-txt-tab">
        <div class="mb-4">
          <p class="text-warning">
            *Your txt file must have list of domains seperated by new line.
            <br><br>
            By default all domains imported from txt will have no description. If you choose to import multiple domains with description, csv import is recommended.
          </p>
          <form method="post" enctype="multipart/form-data">
            <div class="custom-file">
              {% csrf_token %}
              <input type="file" class="custom-file-input" id="txtFile" required multiple accept=".txt" name="txtFile">
              <label class="custom-file-label" for="txtFile">Choose *.txt file</label>
            </div>
            <input type="submit" class="btn btn-primary float-right mt-5 mb-2" value="Upload">
          </form>
        </div>
      </div>
      <div class="tab-pane fade" id="animated-underline-csv" role="tabpanel" aria-labelledby="animated-underline-csv-tab">
        <div class="mb-4">
          <p class="text-warning">
            *Your csv file must be in the format of <strong>domain, description</strong> seperated by new line.
          </p>
          <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <div class="custom-file">
              <input type="file" class="custom-file-input" id="csvFile" multiple accept=".csv" required name="csvFile">
              <label class="custom-file-label" for="csvFile">Choose *.csv file</label>
            </div>
            <input type="submit" class="btn btn-primary float-right mt-5 mb-2" value="Upload">
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock main_content %}


{% block page_level_script %}
<script src="{% static 'assets/js/scrollspyNav.js' %}"></script>
<script>
$(".custom-file-input").on("change", function() {
  var fileName = $(this).val().split("\\").pop();
  $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
});
</script>
{% endblock page_level_script %}
