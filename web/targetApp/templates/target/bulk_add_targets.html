{% extends 'base/base.html' %}
{% load static %}

{% block title %}
Add Targets in Bulk
{% endblock title %}


{% block custom_js_css_link %}
{% endblock custom_js_css_link %}

{% block breadcrumb_title %}
Add Targets in Bulk
{% endblock breadcrumb_title %}

{% block main_content %}
<div class="statbox widget box box-shadow">
  <div class="widget-header">
    <div class="row">
      <div class="col-xl-12 col-md-12 col-sm-12 col-12">
        <h4>Add Targets</h4>
      </div>
    </div>
  </div>
  <div class="widget-content widget-content-area animated-underline-content">
    <form method="post">
      {% csrf_token %}
      <div class="form-group mb-4">
        <label for="importSubdomainFormControlTextarea">Seperate the targets using new line. If the subdomain already exists, it will be skipped.</label>
        <textarea class="form-control" id="addTargets" rows="7" spellcheck="false" name="addTargets" placeholder="example.com"></textarea>
      </div>
      <div class="form-group mb-4">
        <label for="targetDescription">Target Description (Optional)</label>
        <input type="text" class="form-control" id="targetDescription" placeholder="Interesting Target" name="targetDescription">
      </div>
      <button class="btn btn-primary submit-fn mt-2 float-right" type="submit" id="addTargetButton">Add 0 Target</button>
    </form>
  </div>
</div>
{% endblock main_content %}

{% block page_level_script %}
<script src="{% static 'assets/js/scrollspyNav.js' %}"></script>
<script type="text/javascript">
// change the button text everytime targets is added
var addTargetsButton = document.getElementById("addTargetButton");
addTargetsButton.disabled = true;
$('#addTargets').on('change keyup',function(){
  var text = $("#addTargets").val();
  var lines = text.split(/\r|\r\n|\n/);
  var count = lines.length;
  addTargetsButton.innerHTML = `Add ${count} Targets`;
  if (!count) {
    addTargetsButton.disabled = true;
  }
  else{
    addTargetsButton.disabled = false;
  }
});
</script>
{% endblock page_level_script %}
